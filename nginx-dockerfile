# Use busybox como a imagem base
FROM busybox:latest

# Baixar e instalar o Nginx
RUN wget http://nginx.org/download/nginx-1.21.6.tar.gz && \
    tar -xzvf nginx-1.21.6.tar.gz && \
    cd nginx-1.21.6 && \
    ./configure --without-http_rewrite_module --without-http_gzip_module && \
    make && \
    make install

# Criar diretório para logs do Nginx
RUN mkdir -p /var/log/nginx

# Copiar o script de inicialização do Nginx
COPY nginx.conf /etc/nginx/nginx.conf

# Expor a porta 80
EXPOSE 80

# Definir o entrypoint para executar o Nginx em primeiro plano
ENTRYPOINT ["nginx", "-g", "daemon off;"]
